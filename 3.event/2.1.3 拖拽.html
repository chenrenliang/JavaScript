<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        #div1{width:100px;height:100px;background: red;position: absolute;}
    </style>
</head>
<body >
            <div id="div1"></div>
            <script>
                var oDiv=document.querySelector("#div1");
                oDiv.onmousedown=function(ev){
                    var oEvent= ev || window.event;
                    var  left=oEvent.clientX-oDiv.offsetLeft;
                    var top=oEvent.clientY-oDiv.offsetTop;

                    document.onscroll=document.onmousemove=function(ev){
                        var oEvent=ev || window.event;
                        var l=oEvent.clientX-left;
                        var t=oEvent.clientY-top;
                        if(l<0){l=0;}
                        else if(l>document.documentElement.clientWidth-oDiv.offsetWidth){
                            l=document.documentElement.clientWidth-oDiv.offsetWidth;
                        }


                         if(t<0){t=0;}
                        else if(t>document.documentElement.clientHeight-oDiv.offsetHeight){
                            t=document.documentElement.clientHeight-oDiv.offsetHeight;
                        }
                        //5.scrollTop document.body.scrollTop Chrome
                        // scrollLeft  document.documentElement.scrollLeft  ÈùûChrome
//                        var  scrollTop=document.documentElement.scrollTop || document.body.scrollTop;
//                        var scrollLeft=document.documentElement.scrollLeft || document.body.scrollLeft;


                        oDiv.style.left=l+"px";
                        oDiv.style.top=t+"px";
                    };
                    document.onmouseup=function(){
                        document.onmousemove=null;
                        document.onmouseup=null;
                    };
                    return false;
                }

            </script>
</body>
</html>